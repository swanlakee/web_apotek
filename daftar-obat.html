<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Daftar Obat</title>

<style>
*{box-sizing:border-box;font-family:"Segoe UI",sans-serif}
body{margin:0;background:#f2f2f2}

/* HEADER */
.header{
    background:#fff;
    padding:14px 20px;
    display:flex;
    align-items:center;
    gap:10px;
    box-shadow:0 2px 4px rgba(0,0,0,.1)
}
.header img{width:40px}
.header span{font-size:14px;font-weight:600}

/* CONTENT */
.container{
    max-width:380px;
    margin:auto;
    padding:20px
}
h2{text-align:center;margin-bottom:10px}
.info{text-align:center;font-size:14px;margin-bottom:14px}

/* SEARCH */
.search{
    width:100%;
    padding:14px;
    border-radius:10px;
    border:none;
    margin-bottom:16px;
    box-shadow:0 2px 4px rgba(0,0,0,.1)
}

/* GRID */
.grid{
    display:grid;
    grid-template-columns:repeat(2,1fr);
    gap:14px
}
.card{
    background:#fff;
    border-radius:12px;
    padding:12px;
    box-shadow:0 2px 4px rgba(0,0,0,.15);
    text-align:center
}
.card img{
    width:100%;
    height:90px;
    object-fit:contain;
    margin-bottom:6px
}
.card h4{margin:4px 0;font-size:14px}
.price{font-size:13px;margin-bottom:8px}
.btn-add{
    padding:6px 12px;
    border-radius:14px;
    border:none;
    background:#f5b942;
    color:#fff;
    font-size:12px;
    cursor:pointer
}

/* CHECKOUT */
.checkout{
    margin:24px auto 10px;
    width:85%;
    padding:14px;
    border-radius:22px;
    border:none;
    background:#6cc89b;
    color:#fff;
    font-size:15px;
    font-weight:600;
    cursor:pointer;
    display:block
}
</style>
</head>

<body>

<!-- ðŸ”’ VALIDASI ALUR -->
<script>
const dataAwal = JSON.parse(localStorage.getItem("dataAwal"));
if (!dataAwal || dataAwal.layanan !== "Mandiri") {
    window.location.href = "user_dashboard.html";
}
</script>

<!-- HEADER -->
<div class="header">
    <img src="asset/logo.png">
    <span>Apotek<br>Kisah Kasih</span>
</div>

<div class="container">
    <h2>Daftar Obat</h2>

    <div class="info">
        <strong id="namaPasien"></strong>
    </div>

    <input type="text" class="search" placeholder="Cari Obat">

    <div class="grid">

        <div class="card">
            <img src="asset/bodrex.png">
            <h4>Bodrex</h4>
            <div class="price">Rp 5.000</div>
            <button class="btn-add">Tambah</button>
        </div>

        <div class="card">
            <img src="asset/paracetamol.jpg">
            <h4>Paracetamol</h4>
            <div class="price">Rp 5.000</div>
            <button class="btn-add">Tambah</button>
        </div>

        <div class="card">
            <img src="asset/amoxicillin.png">
            <h4>Amoxicillin</h4>
            <div class="price">Rp 10.000</div>
            <button class="btn-add">Tambah</button>
        </div>

        <div class="card">
            <img src="asset/promag.png">
            <h4>Promag</h4>
            <div class="price">Rp 9.000</div>
            <button class="btn-add">Tambah</button>
        </div>

    </div>

    <button class="checkout" onclick="checkoutMandiri()">
        Checkout & Ambil Nomor Antrian
    </button>
</div>

<script>
document.getElementById("namaPasien").innerText = dataAwal.nama;

/* ðŸ”¥ BUAT NOMOR ANTRIAN MANDIRI */
function checkoutMandiri(){
    let nomor = parseInt(localStorage.getItem("antrianMandiri")) || 0;
    nomor++;
    localStorage.setItem("antrianMandiri", nomor);

    const nomorFinal = "M-" + String(nomor).padStart(2,"0");

    localStorage.setItem("antrianAktif", JSON.stringify({
        nama: dataAwal.nama,
        layanan: "Mandiri",
        nomor: nomorFinal
    }));

    alert("Nomor Antrian Anda: " + nomorFinal);

    setTimeout(() => {
        window.location.href = "user_dashboard.html";
    }, 300);
}
</script>

</body>
</html>
